<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Ablum Quân Sự 75DCKN24</title>
  <style>
    :root{
      --maxw:1100px;--gap:16px;--radius:12px;
      --bg:#0d1117;--card:#161b22;--text:#e6edf3;--muted:#9da7b3;--accent:#58a6ff;
      /* Chiều cao khung cố định cho media */
      --media-h: clamp(180px, 24vw, 260px);
    }
    *{box-sizing:border-box}
    body{font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;margin:0;background:var(--bg);color:var(--text)}
    header{max-width:var(--maxw);padding:24px 16px;margin:auto}
    header h1{margin:0 0 8px 0;font-size:28px}
    header p{margin:0;color:var(--muted)}
    .container{max-width:var(--maxw);margin:0 auto;padding:0 16px 40px}
    .grid{
      display:grid;
      grid-template-columns: repeat(auto-fill, minmax(260px,1fr));
      gap:var(--gap);
      align-items:start;
    }
    .card{
      background:var(--card);
      border:1px solid rgba(0, 68, 255, 0.06);
      border-radius:var(--radius);
      overflow:hidden; /* chặn tràn ra ngoài */
      box-shadow:0 6px 16px rgba(0,0,0,.25);
    }
    /* MEDIA LUÔN GỌN TRONG KHUNG */
    .media{
      display:block;
      width:100%;
      height:var(--media-h);   /* chiều cao cố định */
      object-fit:cover;        /* cắt vừa khung */
      background:#000;
    }
    .body{padding:12px 14px}
    .title{font-weight:600;margin:0 0 6px 0}
    .desc{margin:0;color:var(--muted);font-size:14px;line-height:1.5}
    footer{max-width:var(--maxw);margin:24px auto 60px;padding:0 16px;color:var(--muted);font-size:13px}
    .toolbar{display:flex;gap:8px;align-items:center;justify-content:flex-end;margin:8px 0 16px}
    .btn{font-size:12px;padding:6px 10px;border-radius:8px;border:1px solid rgba(255,255,255,.12);background:transparent;color:var(--text);cursor:pointer}
    .btn[aria-pressed="true"]{border-color:var(--accent);color:var(--accent)}
  </style>
</head>
<body>
  <header>
    <h1>Ablum Quân Sự 75DCKN24</h1>
    <p>Nơi Lưu Giữu Kỉ Niệm </p>
  </header>

  <main class="container">
    <div class="toolbar">
      <button class="btn" data-filter="all" aria-pressed="true">Tất cả</button>
      <button class="btn" data-filter="image" aria-pressed="false">Ảnh</button>
      <button class="btn" data-filter="video" aria-pressed="false">Video</button>
    </div>
    <section id="grid" class="grid" aria-live="polite"></section>
  </main>

  <footer>
    Web được CAO VĂN NAM @2025
  </footer>

  <!-- Nạp dữ liệu -->
  <script src="data.js"></script>
  <script>
    (function(){
      const DATA = (Array.isArray(window.APP_DATA) ? window.APP_DATA : [])
        .filter(x => x && (x.type === 'image' || x.type === 'video'));

      const grid = document.getElementById('grid');

      function makeCard(item){
        const wrap = document.createElement('article');
        wrap.className = 'card';

        if(item.type === 'image'){
          const img = document.createElement('img');
          img.className = 'media';
          img.loading = 'lazy';
          img.alt = item.alt || item.title || 'image';
          img.src = item.src;
          wrap.appendChild(img);
        } else if(item.type === 'video'){
          const vid = document.createElement('video');
          vid.className = 'media';
          vid.controls = true;
          vid.preload = 'metadata';
          vid.playsInline = true;
          if(item.poster) vid.poster = item.poster;
          const src = document.createElement('source');
          src.src = item.src;
          const ext = (item.src.split('.').pop()||'').toLowerCase();
          src.type = (ext === 'mp4') ? 'video/mp4' : (ext === 'webm' ? 'video/webm' : '');
          vid.appendChild(src);
          wrap.appendChild(vid);
        }

        const body = document.createElement('div');
        body.className = 'body';
        const h = document.createElement('h3');
        h.className = 'title';
        h.textContent = item.title || (item.type === 'image' ? 'Ảnh' : 'Video');
        const p = document.createElement('p');
        p.className = 'desc';
        p.textContent = item.description || '';
        body.appendChild(h);
        body.appendChild(p);
        wrap.appendChild(body);

        return wrap;
      }

      function render(filter='all'){
        grid.innerHTML = '';
        const list = filter === 'all' ? DATA : DATA.filter(i => i.type === filter);
        if(!list.length){
          const empty = document.createElement('p');
          empty.className = 'desc';
          empty.textContent = 'Không có mục nào.';
          grid.appendChild(empty);
          return;
        }
        list.forEach(item => grid.appendChild(makeCard(item)));
      }

      const btns = document.querySelectorAll('.toolbar .btn');
      btns.forEach(btn => {
        btn.addEventListener('click', () => {
          btns.forEach(b => b.setAttribute('aria-pressed', 'false'));
          btn.setAttribute('aria-pressed', 'true');
          render(btn.dataset.filter);
        });
      });

      render('all');
    })();
  </script>
</body>
</html>
